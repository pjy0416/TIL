<h3>예제 - 숫자맞추기</h3>



- 1~100 사이의 수 중에서 무작위로 선택해야한다
- 플레이어는 10번의 기회안에 숫자를 맞춰야한다
- 틀렸다면 큰지 작은지 포함해서 말해야 한다.
- 또한, 이전에 써냈던 번호들도 보여줘야한다.
- 게임은 플레이어가 숫자를 맞추던가, 기회를 모두 소진하면 끝난다
- 게임이 끝나면 다시 게임을 할 것인지 묻게된다.



위의 조건을 정리하면

1. 1과 100사이의 숫자 중 무작위로 추출한다.
2. 1부터 플레이어의 차례를 기록한다.
3. 플레이어에게 숫자를 맞출 수 있게 한다.
4. 숫자를 맞추면 어딘가에 저장하고, 사용자는 이전의 추측한 숫자를 볼 수 있도록 한다.
5. 그다음, 숫자가 일치한지 확인한다.
6. 만약 일치한다면:
   1. 축하 메시지를 표시한다.
   2. 더 이상 숫자를 맞출필요가 없다.
   3. 플레이어가 다시 게임을 할지 묻는다.
7. 숫자가 틀렸고, 차례가 남아있다면:
   1. 틀렸다고 알린다.
   2. 다른 숫자를 입력할 수 있도록 한다.
   3. 차례가 1 증가한다.
8. 숫자가 틀렸고, 차례가 없다면:
   1. 게임이 종료되었음을 알린다.
   2. 더 이상 숫자를 맞출필요가 없다..
   3. 플레이어가 다시 게임을 할지 묻는다.
9. 게임이 재시작 되면, 게임의 구조와 UI는 완전히 리셋되며, step1 부터 다시 로직이 시작된다.



- `number-guessing-game-start.html`파일 만들기

  - `<script>` 태그 안에 코드를 추가하기

    ```javascript
    var randomNumber = Math.floor(Math.random() * 100) + 1;
    
    var guesses = document.querySelector('.guesses');
    var lastResult = document.querySelector('.lastResult');
    var lowOrHi = document.querySelector('.lowOrHi');
    
    var guessSubmit = document.querySelector('.guessSubmit');
    var guessField = document.querySelector('.guessField');
    
    var guessCount = 1;
    var resetButton;
    ```

  - 위의 변수를 이용해서 html 코드 작성하기

    ```html
    <div class = "resultParas">
        <p class="guesses"></p>
        <p class="lastResult"></p>
        <p class="lowOrHi"></p>
    </div>  
    
    <label for="guessField">Enter a guess: </label><input type="text" id="guessField" class="guessField">
    <input type="submit" value="Submit guess" class="guessSubmit">
    ```

  - checkGuess 함수 만들기

    ```javascript
    function checkGuess() {
        var userGuess = Number(guessField.value);
        if(guessCount ===1) {
            gueses.textContent = 'Previous guesses : ';
        }
        gueses.textContent += userGuess + ' ';
    
        if( userGuess === randomNumber) {
            lastResult.textContent = 'Congraturations! You got it right!';
            lastResult.style.backgroundColor = 'green';
            lowOrHi.textContent='';
            setGameOver();
        } else if (guessCount === 10) {
            lastResult.textContent = '!!!GAME OVER!!!';
            setGameOver();
        } else {
            lastResult.textContent = 'Wrong!';
            lastResult.style.backgroundColor = 'red';
            if(userGuess < randomNumber) {
                lowOrHi.textContent = 'Last guess was too low!';
            } else if(userGuess > randomNumber) {
                lowOrHi.textContent = 'Last guess was too high!';
            }
        }
    
        guessCount++;
        guessField.nodeValue = '';
        guessField.focus();
    }
    ```

    - 2번 줄까지는 userGuess 변수를 선언하고, 텍스트 필드에서 입력된 값들을 변수 값으로 지정한다. 여기서 빌트인된 `Number()`메소드로 실행된다.
    - 3-5번 조건문 => 현재 게임이 처음인지 아닌지 판단하는 조건
      - 처음이라면 "Previous guesses :" 가 변수의 텍스트가 된다.
    - 8-24 줄
      - 첫 if문은 처음에 지정한 `randomNumber`와 사용자가 추측한 값 `userGuess`가 같은지 본다. 참이면 초록색, 인포메이션 박스로 축하메시지를 보여주고, 게임을 더할지와 관련된 `setGameOver()` 함수를 불러온다
      - else if 문은 마지막 순서인지 계산한다.
      - else 문은 틀렸음을 알려주고 정답보다 큰지 작은지 알려준다.
    - 26-28 줄
      - 다음 숫자 추측을 위한 것. guessCount는 +1을 통해 차례가 지났음을 해준다.
      - 그리고 값에 상관없이 텍스트필드를 공란으로 만들고, 커서를 위치시키므로, 다음값이 입력될 수 있도록 한다.

  - 이벤트

    - **이벤트 리스너(event listeners)**

      - 발생된 이벤트를 처리함

    - **이벤트 핸들러(event handlers)**

      - 이벤트가 발생했을 때 실행되는 코드 블럭

    - checkGuess() 함수의 중괄호가 끝난 뒤, 아래 코드 추가

      ```javascript
      guessSubmit.addEventListener('click', checkGuess);
      ```

      - `guessSubmit` 버튼에 이벤트 리스너를 추가하는 과정, 두개의 인수를 가지는 `addEventListener`메소드다.
      - 문자열로서 클릭을 처리하는 이벤트이고, 이벤트가 발생했을 때 실행하고자 하는 코드는 `checkGuess()`함수다. 특히, **`addEventListener()`안에서는 함수의 괄호가 필요 없다는 것에 주의**

  - 함수로 프로그램 종료하기

    - `setGameOver()` 함수 추가

      ```javascript
      function setGameOver() {
          guessField.disabled = true;
          guessSubmit.disabled = true;
          resetButton = document.createElement('button');
          resetButton.textContent = 'Start new game';
          document.body.appendChild(resetButton);
          resetButton.addEventListener('click', resetGame);
      }
      ```

      - 2-3번 줄은 텍스트 입력과 버튼의 disabled 속성을 true로 함으로써 작동되지 않게한다. <- 이 코드가 없다면 게임이 종료된 이후에도 계속 정답을 제출할 것이다.
      - 4-6번 줄은 새로운 `<button>` 엘리먼트를 생성하고, "Start new game"이라고 표시 ~> 현재의 HTML 아래에 추가한다.
      - 7번줄은 새 버튼으로 하여금 이벤트 리스너를 지정하여 클릭되면 `resetGame()` 함수가 실행되도록 한다.

    - `resetGame()` 함수 추가

      ```javascript
      function resetGame() {
          guessCount =1;
      
          var resetParas = document.querySelectorAll('.resultParas p');
          for(var i=0; i<resetParas.length; i++) {
              resetParas[i].textContent = '';
          }
          resetButton.parentNode.removeChild(resetButton);
      
          guessField.disabled = false;
          guessSubmit.disabled = false;
          guessField.value = '';
          guessField.focus();
      
          lastResult.style.backgroundColor = 'white';
      
          randomNumber = Math.floor(Math.random() * 100) +1;
      }
      ```

      - guessCount를 1로 초기화
      - 표시된 정보 모두 초기화
      - 코드상에서 초기화 버튼 삭제
      - 폼 작성을 위해 텍스트를 입력하는 곳을 비워놓고 커서를 위치시킨다.
      - `lastResult` 변수 상의 문장 배경색을 제거한다.
      - 임의의 수를 다시 지정함으로, 이전 게임의 `randomNumber`와 겹치지 않도록 한다.
      - `querySelectorAll()` 메소드를 사용하여 `<div class ="resultParas">` 안의 모든 문장들의 배열을 변수로 만들고 있다. 그리고 반복을 통해 각각의 배열 원소에 접근하여, 내용을 제거한다.



- 객체에 대한 고찰

  - `var resetButton;` 아래에 다음 코드를 추가해보기

    ```javascript
    guessField.focus();
    ```

    - 여기서는 `focus()` 메소드를 통해 페이지가 뜨자마자 `<input>` 텍스트 필드에 커서를 자동으로 위치시킬 수 있기 때문에, 사용자가 처음에 폼 필드를 클릭할 필요 없이 바로 글을 쓸 수 있게 된다. (아무것도 아닌 것 같지만, 굉장히 편리하기 때문에 좋은 효과)

  - HTML의 입력 폼 필드의 정보를 저장하는 guessField 변수를 생성했었다.

    ```javascript
    var guessField = document.querySelector('.guessField');
    ```

    - 이 정보를 얻기 위해, `document` 객체의 `querySelector()` 메소드를 사용한다.
    - `querySelector()`는 특정 정보를 가져오는 역할을 한다.
    - 이제 `<input>` 요소의 정보를 담고 있기 때문에, 속성과 메소드를 접근할 수 있다. 따라서, `focus()`를 이용할 수 있게 되는 것이다.
      

- 브라우저 객체로 다루기

  1. 먼저, 실습한 브라우저에서 프로그램을 연다

  2. 다음 [browser developer tools](https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_are_browser_developer_tools)을 실행하고, 자바스크립트 콘솔창을 활성화한다.

     1. `f12` or `ctrl + shift + i `

  3.  `guessField`의 입력과 콘솔에서 [`<input>`](https://developer.mozilla.org/ko/docs/Web/HTML/Element/input) 요소를 포함한 변수를 보여줄 것이다. 변수를 포함한 실행환경 상에 존재하는 객체이름을 콘솔이 자동으로 완성하는 것도 알아야한다.

  4. 다음 코드를 입력하자

     ```javascript
     guessField.value = 'Hello';
     ```

  5. `guesses`에 입력하고 반환값을 살펴보자. 콘솔 창에서 변수가 [`<p>`](https://developer.mozilla.org/ko/docs/Web/HTML/Element/p) 요소가 있음을 보여줄 것이다.

  6. 다음 코드를 입력하자

     ```javascript
     guesses.value
     ```

     1. 브라우저에 아무런 문장이 없기 때문에, undefined가 리턴된다.

  7. 대신, 다음 코드에서 문자를 변경/추가하기 위해서는 [`textContent`](https://developer.mozilla.org/ko/docs/Web/API/Node/textContent) 속성을 사용한다.

     ```javascript
     guesses.textContent = 'Where is my paragraph?';
     ```

  8. 그러면 이제 다양한 작업을 할 수 있으니, 하나하나 시도해보자.

     ```javascript
     guesses.style.backgroundColor = 'yellow';
     guesses.style.fontSize = '200%';
     guesses.style.padding = '10px';
     guesses.style.boxShadow = '3px 3px 6px black';
     ```

     

